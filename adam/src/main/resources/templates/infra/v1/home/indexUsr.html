<!DOCTYPE html>
<!--[if IE 8 ]><html class="ie ie8" lang="en"> <![endif]-->
<!--[if IE 9 ]><html class="ie ie9" lang="en"> <![endif]-->
<!--[if (gte IE 9)|!(IE)]><!-->
<!--<![endif]-->
<html lang="en" xmlns:th="http://www.thymeleaf.org">

<!-- head -->
<div th:replace="~{infra/v1/include/headUsr :: head}"></div>

<body id="home">
    <header>
        <!-- header desktop -->
        <div class="header-top d-xs-none ">
            <div class="container">
				<div th:replace="~{infra/v1/include/bodyUsr :: topMenu(0)}"></div>
            </div>
        </div>
    </header>

    <!-- main content -->
    <div class="main-content">
        <div class="wrap-banner">            
            <!-- slide show -->
            <div class="section banner">
                <div class="tiva-slideshow-wrapper">
                    <div id="tiva-slideshow" class="nivoSlider" style="height: 100px;">
                    </div>
                </div>
            </div>
        </div>

        <!-- main -->
        <div id="wrapper-site">
            <div id="content-wrapper" class="full-width">
                <div id="main">
                    <section class="page-home">
                        <div class="container">
                            <!-- delivery form -->
                            <div class="section policy-home col-lg-12 col-xs-12" style="height: 80px;">
                                <div class="row">
                                    <div class="col-lg-4 col-md-4">
                                        <div class="block">
                                            <div class="block-content">
                                                <div class="policy-item">
                                                    <div class="policy-content iconpolicy1">
                                                        <img src="usr/img/home/home1-policy.png" alt="img">
                                                        <div class="policy-name mb-5">무료배송</div>
                                                        <div class="policy-des">원하는곳 어디든 배송가능</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tiva-html col-lg-4 col-md-4">
                                        <div class="block">
                                            <div class="block-content">
                                                <div class="policy-item">
                                                    <div class="policy-content iconpolicy2">
                                                        <img src="usr/img/home/home1-policy2.png" alt="img">
                                                        <div class="policy-name mb-5">출고전 확실한 점검</div>
                                                        <div class="policy-des">1등급 정비사가 출고전 점검</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="tiva-html col-lg-4 col-md-4">
                                        <div class="block">
                                            <div class="block-content">
                                                <div class="policy-item">
                                                    <div class="policy-content iconpolicy3">
                                                        <img src="usr/img/home/home1-policy3.png" alt="img">
                                                        <div class="policy-name mb-5">부담없는 낮은 금리</div>
                                                        <div class="policy-des">최저 연3% 최대 60개월</div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 취향저격! 추천차량 -->
                        <div class="section mt-5">
                            <div class="container">
                                <div class="tiva-row-wrap row">
                                    <div class="groupcategoriestab-vertical col-md-12 col-xs-12">
                                        <div class="grouptab row">
                                            <div class="categoriestab-right col-lg-12 align-items-start d-flex flex-column col-md-12 flex-3">
                                                <div class="block-title-content">
                                                    <h2>취향저격! 추천차량</h2>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="grouptab row">
                                            <div class="categoriestab-left product-tab col-md-12 flex-9">
                                                <div class="tab-content">
                                                    <div id="new" class="tab-pane fade in active show">
                                                        <div class="category-product-index owl-carousel owl-theme owl-loaded owl-drag">
                                                            
                                                            <th:block th:each="list : ${listRecommend}">
																<div class="item">
	                                                                <div class="product-miniature first-item js-product-miniature item-one">
	                                                                    <div class="thumbnail-container">
	                                                                        <a th:href="@{/productUsrDetail(shSeq=${list.pdtSeq})}">
	                                                                            <img class="img-fluid image-cover"     th:src="${list.xpdtImgF}" alt="img">
	                                                                            <img class="img-fluid image-secondary" th:src="${list.xpdtImgB}" alt="img">
	                                                                        </a>
	                                                                    </div>
	                                                                    <div class="product-description">
	                                                                        <div class="product-groups">
	                                                                            <div class="product-title">
	                                                                                <a th:href="@{/productUsrDetail(shSeq=${list.pdtSeq})}">
																						<th:block>
																							<span th:text="${list.xpdtBrandName}"></span>
																							<br>
																							<span th:text="${list.pdtName}"></span>
																						</th:block>
																					</a>
	                                                                            </div>
	                                                                            
	                                                                            <div class="rating">
	                                                                                <div class="star-content">
																						<th:block th:if="${list.xpdtStar > 0}" th:each="num : ${#numbers.sequence(1, list.xpdtStar)}">
																							<div class="star"></div>	
																						</th:block>
																						<th:block th:unless="${list.xpdtStar > 0}" th:each="num : ${#numbers.sequence(1, list.xpdtStar)}">
																							<div class=""></div>	
																						</th:block>
	                                                                                </div>
	                                                                            </div>
	                                                                            
	                                                                            <div class="product-group-price">
	                                                                                <div class="product-price-and-shipping">
	                                                                                    ￦<span th:text="${#numbers.formatInteger(list.pdtPrice, 1, 'COMMA')}" class="price" style="font-size: 20px;"></span>만원
	                                                                                </div>
	                                                                            </div>
	                                                                        </div>
	                                                                        
																			<!-- 찜추가 -->
			                                                                <div class="product-buttons d-flex justify-content-center">
			                                                                    <!--<form method="post" class="formAddToWishlist">-->
			                                                                        <input th:name="'wishlistBest'+${list.pdtSeq}" th:value="${list.pdtSeq}" type="hidden"/>
			                                                                        
			                                                                        <input th:if    ="${list.xwshSeq} != null" th:name="'wishlistBest'+${list.pdtSeq}+'_'" th:value="${list.xwshSeq}" type="hidden"/>
			                                                                        <input th:unless="${list.xwshSeq} != null" th:name="'wishlistBest'+${list.pdtSeq}+'_'" th:value="x"               type="hidden"/>
																					
			                                                                        <a th:name="'wishlistBest'+${list.pdtSeq}" class="addToWishlist" href="javascript:void(0);" data-rel="1" th:onclick="fnClickWishlist(this);">
			                                                                            <i th:if    ="${list.xwshSeq != null}" th:name="'wishlistBest'+${list.pdtSeq}+'__'" th:id="'wishlistBest'+${list.pdtSeq}+'__'" class="fa fa-heart" aria-hidden="true" style="color:pink;"></i>
			                                                                            <i th:unless="${list.xwshSeq != null}" th:name="'wishlistBest'+${list.pdtSeq}+'__'" th:id="'wishlistBest'+${list.pdtSeq}+'__'" class="fa fa-heart" aria-hidden="true" style=""></i>
			                                                                        </a>
			                                                                    <!--</form>-->
			                                                                </div>	                                                                        
	                                                                    </div>
	                                                                </div>
                                                            	</div>
															</th:block>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- 최근등록차량 -->
                        <div class="section mt-3">
                            <div class="container">
                                <div class="tiva-row-wrap row">
                                    <div class="groupcategoriestab-vertical col-md-12 col-xs-12">
                                        <div class="grouptab row">
                                            <div class="categoriestab-right col-lg-12 align-items-start d-flex flex-column col-md-12 flex-3">
                                                <div class="block-title-content">
                                                    <h2>최근등록차량</h2>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="grouptab row">
                                            <div class="categoriestab-left product-tab col-md-12 flex-9">
                                                <div class="tab-content">
                                                    <div id="new" class="tab-pane fade in active show">
                                                        <div class="category-product-index owl-carousel owl-theme owl-loaded owl-drag">
                                                            <th:block th:each="list : ${listNewReg}">
	                                                            <div class="item">
	                                                                <div class="product-miniature first-item js-product-miniature item-one">
	                                                                    <div class="thumbnail-container">
	                                                                        <a th:href="@{/productUsrDetail(shSeq=${list.pdtSeq})}">
	                                                                            <img class="img-fluid image-cover"     th:src="${list.xpdtImgF}" alt="img">
	                                                                            <img class="img-fluid image-secondary" th:src="${list.xpdtImgB}" alt="img">
	                                                                        </a>
	                                                                    </div>
	                                                                    <div class="product-description">
	                                                                        <div class="product-groups">
	                                                                            <div class="product-title">
	                                                                                <a th:href="@{/productUsrDetail(shSeq=${list.pdtSeq})}">
																						<th:block>
																							<span th:text="${list.xpdtBrandName}"></span>
																							<br>
																							<span th:text="${list.pdtName}"></span>
																						</th:block>
																					</a>
	                                                                            </div>
	                                                                            <div class="product-group-price">
	                                                                                <div class="product-price-and-shipping">
	                                                                                    ￦<span th:text="${#numbers.formatInteger(list.pdtPrice, 1, 'COMMA')}" class="price" style="font-size: 20px;"></span>만원
	                                                                                </div>
	                                                                            </div>
	                                                                        </div>
	                                                                        
	                                                                        <!-- 찜추가 -->
			                                                                <div class="product-buttons d-flex justify-content-center">
			                                                                    <!--<form action="#addToWishlist" method="post" class="formAddToWishlist">-->
			                                                                        <input th:name="'wishlistNew'+${list.pdtSeq}" th:value="${list.pdtSeq}" type="hidden"/>
			                                                                        
			                                                                        <input th:if    ="${list.xwshSeq} != null" th:name="'wishlistNew'+${list.pdtSeq}+'_'" th:value="${list.xwshSeq}" type="hidden"/>
			                                                                        <input th:unless="${list.xwshSeq} != null" th:name="'wishlistNew'+${list.pdtSeq}+'_'" th:value="x"               type="hidden"/>
			                                                                        
			                                                                        <a th:name="'wishlistNew'+${list.pdtSeq}" class="addToWishlist" href="javascript:void(0);" data-rel="1" th:onclick="fnClickWishlist(this);">
			                                                                            <i th:if    ="${list.xwshSeq != null}" th:name="'wishlistNew'+${list.pdtSeq}" class="fa fa-heart" aria-hidden="true" style="color:pink;"></i>
			                                                                            <i th:unless="${list.xwshSeq != null}" th:name="'wishlistNew'+${list.pdtSeq}" class="fa fa-heart" aria-hidden="true" style=""></i>
			                                                                        </a>
			                                                                    <!--</form>-->
			                                                                </div>	
	                                                                    </div>
	                                                                </div>
	                                                            </div>
                                                            </th:block>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>                        
                    </section>
                </div>
            </div>
        </div>
    </div>

    <!-- footer -->
    <div th:replace="~{infra/v1/include/headUsr :: footer}"></div>

    <!-- back top top -->
    <div class="back-to-top">
        <a href="#">
            <i class="fa fa-long-arrow-up"></i>
        </a>
    </div>

	<script src="sdm/js/common.js"></script>
	
    <!-- Vendor JS -->
    <script src="usr/libs/jquery/jquery.min.js"></script>
    <script src="usr/libs/popper/popper.min.js"></script>
    <script src="usr/libs/bootstrap/js/bootstrap.min.js"></script>
    <script src="usr/libs/nivo-slider/js/jquery.nivo.slider.js"></script>
    <script src="usr/libs/owl-carousel/owl.carousel.min.js"></script>

    <!-- Template JS -->
    <script src="usr/js/theme.js"></script>
    
    <script type="text/javascript">
// ============================================================================
// 변수선언
// ============================================================================
	
// ============================================================================
// 이벤트
// ============================================================================    
		// 찜클릭
		fnClickWishlist = function(obj) {
			// 제품순번
			let wishlist = document.querySelector("input[name="+obj.name+"]");
			let pdtSeq   = wishlist.value;
			let heart    = document.querySelector("i[id="+obj.name+"__]");
			
			// 찜순번
			let wishlistWshSeq = document.querySelector("input[name="+obj.name+"_]");
			let wshSeq         = wishlistWshSeq.value;
			
			//alert("wishlist.name: "+wishlist.name);
			//alert("heart.name: "+heart.id);
			//alert("wishlistWshSeq.name: "+wishlistWshSeq.name);
			
			$.ajax({
				async: true
				, cache: false
				, type: "post"
				, data: {"pdtSeq":pdtSeq, "wshSeq":wshSeq}
				, url: "/insertWishlist"
				, success: function(response) {
					if(response.rt == "success") {
						alert("찜 등록 성공");
						heart.setAttribute("style", "color:pink;");
						wishlistWshSeq.setAttribute("value", response.wshSeq);
					} else if(response.rt == "fail") {
						alert("찜 등록중 오류가 있습니다");
					} else if(response.rt == "exist") {
						alert("찜 등록 삭제");
						wishlistWshSeq.setAttribute("value", "x");
						heart.setAttribute("style", "");
					} else if(response.rt == "login") {
						alert("로그인 후 진행 가능합니다");
					}
				}
				, error : function(jqXHR, textStatus, errorThrown){
					alert("ajaxUpdate " + jqXHR.textStatus + " : " + jqXHR.errorThrown);
				}
			});
		}
		
// ============================================================================
// function
// ============================================================================

		// controller 호출
		fnCallController = function() {
			// 조회
	       	form.action = goUrlUsrList;
	       	form.submit(); 
		};
				
	</script>		
		    
</body>

</html>